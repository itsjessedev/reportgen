<!DOCTYPE html>
<html>
<head>
    <title>{{ title }}</title>
</head>
<body>
    <div class="header">
        {% if company_logo_url %}
        <img src="{{ company_logo_url }}" alt="{{ company_name }}" class="logo">
        {% endif %}
        <h1>{{ title }}</h1>
        <p class="meta">Generated: {{ generated_at }}</p>
    </div>

    <!-- Key Metrics -->
    {% if metrics %}
    <h2>Key Metrics</h2>
    <div style="text-align: center;">
        {% for metric in metrics %}
        <div class="metric-card">
            <div class="metric-value {{ metric.class or '' }}">{{ metric.value }}</div>
            <div class="metric-label">{{ metric.label }}</div>
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <!-- Sections -->
    {% for section in sections %}
    <h2>{{ section.title }}</h2>
    <p>{{ section.content }}</p>
    {% endfor %}

    <!-- Data Tables -->
    {% for table in tables %}
    <h2>{{ table.title }}</h2>
    <table>
        <thead>
            <tr>
                {% for header in table.headers %}
                <th>{{ header }}</th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            {% for row in table.rows %}
            <tr>
                {% for cell in row %}
                <td>
                    {% if cell is number %}
                        {% if cell >= 1000 %}
                            ${{ "{:,.2f}".format(cell) }}
                        {% else %}
                            {{ cell }}
                        {% endif %}
                    {% else %}
                        {{ cell }}
                    {% endif %}
                </td>
                {% endfor %}
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% endfor %}

    <div class="footer">
        <p>This report was automatically generated by ReportGen for {{ company_name }}.</p>
        <p>For questions, contact your system administrator.</p>
    </div>
</body>
</html>
